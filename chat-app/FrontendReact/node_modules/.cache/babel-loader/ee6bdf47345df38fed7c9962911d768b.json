{"ast":null,"code":"import AuthService from \"../../../services/auth.service\";\nimport * as actionTypes from './actions.types';\nimport store from 'store';\nexport const setIsFetching = isFetching => {\n  return {\n    type: actionTypes.IS_FETCHING,\n    isFetching\n  };\n};\nexport const isSignedInUser = isLoggedIn => {\n  return {\n    type: actionTypes.IS_LOGGED_IN,\n    isLoggedIn\n  };\n};\nexport function signIn(user) {\n  return async dispatch => {\n    await dispatch(setIsFetching(true));\n    await AuthService.loginUser(user).then(response => {\n      const {\n        token,\n        isAdmin,\n        nickNameColor,\n        nickName\n      } = response.data;\n      store.set(\"token\", token);\n      store.set(\"userData\", {\n        isAdmin,\n        nickName,\n        nickNameColor\n      });\n      dispatch(setIsFetching(false));\n      dispatch(isSignedInUser(true));\n    }).catch(error => {\n      alert(error.response.data);\n      dispatch(setIsFetching(false));\n    });\n  };\n}","map":{"version":3,"sources":["/home/serafym/Общедоступные/ChatApp/chat-app/FrontendReact/src/redux/actions/authActions/auth.actions.js"],"names":["AuthService","actionTypes","store","setIsFetching","isFetching","type","IS_FETCHING","isSignedInUser","isLoggedIn","IS_LOGGED_IN","signIn","user","dispatch","loginUser","then","response","token","isAdmin","nickNameColor","nickName","data","set","catch","error","alert"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,gCAAxB;AACA,OAAO,KAAKC,WAAZ,MAA6B,iBAA7B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,aAAa,GAAIC,UAAD,IAAgB;AAC3C,SAAO;AACLC,IAAAA,IAAI,EAAEJ,WAAW,CAACK,WADb;AAELF,IAAAA;AAFK,GAAP;AAID,CALM;AAOP,OAAO,MAAMG,cAAc,GAAIC,UAAD,IAAgB;AAC5C,SAAO;AACLH,IAAAA,IAAI,EAAEJ,WAAW,CAACQ,YADb;AAELD,IAAAA;AAFK,GAAP;AAID,CALM;AAOP,OAAO,SAASE,MAAT,CAAgBC,IAAhB,EAAsB;AAC3B,SAAO,MAAOC,QAAP,IAAoB;AACzB,UAAMA,QAAQ,CAACT,aAAa,CAAC,IAAD,CAAd,CAAd;AACA,UAAMH,WAAW,CAACa,SAAZ,CAAsBF,IAAtB,EACHG,IADG,CACIC,QAAD,IAAc;AACnB,YAAM;AAACC,QAAAA,KAAD;AAAQC,QAAAA,OAAR;AAAiBC,QAAAA,aAAjB;AAAgCC,QAAAA;AAAhC,UAA4CJ,QAAQ,CAACK,IAA3D;AACAlB,MAAAA,KAAK,CAACmB,GAAN,CAAU,OAAV,EAAmBL,KAAnB;AACAd,MAAAA,KAAK,CAACmB,GAAN,CAAU,UAAV,EAAsB;AAACJ,QAAAA,OAAD;AAAUE,QAAAA,QAAV;AAAoBD,QAAAA;AAApB,OAAtB;AACAN,MAAAA,QAAQ,CAACT,aAAa,CAAC,KAAD,CAAd,CAAR;AACAS,MAAAA,QAAQ,CAACL,cAAc,CAAC,IAAD,CAAf,CAAR;AACD,KAPG,EAQHe,KARG,CAQIC,KAAD,IAAW;AAChBC,MAAAA,KAAK,CAACD,KAAK,CAACR,QAAN,CAAeK,IAAhB,CAAL;AACAR,MAAAA,QAAQ,CAACT,aAAa,CAAC,KAAD,CAAd,CAAR;AACD,KAXG,CAAN;AAYD,GAdD;AAeD","sourcesContent":["import AuthService from \"../../../services/auth.service\";\nimport * as actionTypes from './actions.types';\nimport store from 'store';\n\nexport const setIsFetching = (isFetching) => {\n  return {\n    type: actionTypes.IS_FETCHING,\n    isFetching,\n  };\n};\n\nexport const isSignedInUser = (isLoggedIn) => {\n  return {\n    type: actionTypes.IS_LOGGED_IN,\n    isLoggedIn,\n  };\n};\n\nexport function signIn(user) {\n  return async (dispatch) => {\n    await dispatch(setIsFetching(true));\n    await AuthService.loginUser(user)\n      .then( (response) => {\n        const {token, isAdmin, nickNameColor, nickName} = response.data;\n        store.set(\"token\", token);\n        store.set(\"userData\", {isAdmin, nickName, nickNameColor});\n        dispatch(setIsFetching(false));\n        dispatch(isSignedInUser(true));\n      })\n      .catch((error) => {\n        alert(error.response.data);\n        dispatch(setIsFetching(false));\n      });\n  };\n}\n"]},"metadata":{},"sourceType":"module"}