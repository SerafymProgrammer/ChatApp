{"ast":null,"code":"import AuthService from \"../../../services/auth.service\";\nexport const isSignedInUser = isLoggedIn => {\n  return {\n    type: \"IS_LOGGED_IN\",\n    isLoggedIn\n  };\n};\nexport const setIsFetching = isFetching => {\n  return {\n    type: \"IS_FETCHING\",\n    isFetching\n  };\n};\nexport function signIn(user) {\n  return async dispatch => {\n    await dispatch(setIsFetching(true));\n    await AuthService.loginUser(user).then(async response => {\n      let a = await response.json();\n      return a;\n    }).then(response => {\n      if (response.status === 500) {\n        dispatch(setIsFetching(false));\n        alert(response.msg);\n      } else if (response.userToken && response.status === 200) {\n        localStorage.setItem(\"userToken\", response.userToken);\n        dispatch(isSignedInUser(true));\n      } else {\n        throw new Error(\"Unknown error\");\n      }\n    }).catch(error => {\n      alert(error.message);\n      dispatch(setIsFetching(false));\n    });\n  };\n}","map":{"version":3,"sources":["/home/serafym/Общедоступные/development/ChatApp/chat-app/FrontendReact/src/redux/actions/authActions/auth.actions.js"],"names":["AuthService","isSignedInUser","isLoggedIn","type","setIsFetching","isFetching","signIn","user","dispatch","loginUser","then","response","a","json","status","alert","msg","userToken","localStorage","setItem","Error","catch","error","message"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,gCAAxB;AAEA,OAAO,MAAMC,cAAc,GAAIC,UAAD,IAAgB;AAC5C,SAAO;AACLC,IAAAA,IAAI,EAAE,cADD;AAELD,IAAAA;AAFK,GAAP;AAID,CALM;AAOP,OAAO,MAAME,aAAa,GAAIC,UAAD,IAAgB;AAC3C,SAAO;AACLF,IAAAA,IAAI,EAAE,aADD;AAELE,IAAAA;AAFK,GAAP;AAID,CALM;AAOP,OAAO,SAASC,MAAT,CAAgBC,IAAhB,EAAsB;AAC3B,SAAO,MAAOC,QAAP,IAAoB;AACzB,UAAMA,QAAQ,CAACJ,aAAa,CAAC,IAAD,CAAd,CAAd;AACA,UAAMJ,WAAW,CAACS,SAAZ,CAAsBF,IAAtB,EACHG,IADG,CACE,MAAOC,QAAP,IAAoB;AACxB,UAAIC,CAAC,GAAG,MAAMD,QAAQ,CAACE,IAAT,EAAd;AACA,aAAOD,CAAP;AACD,KAJG,EAKHF,IALG,CAKGC,QAAD,IAAc;AAClB,UAAIA,QAAQ,CAACG,MAAT,KAAoB,GAAxB,EAA6B;AAC3BN,QAAAA,QAAQ,CAACJ,aAAa,CAAC,KAAD,CAAd,CAAR;AACAW,QAAAA,KAAK,CAACJ,QAAQ,CAACK,GAAV,CAAL;AACD,OAHD,MAGO,IAAIL,QAAQ,CAACM,SAAT,IAAsBN,QAAQ,CAACG,MAAT,KAAoB,GAA9C,EAAmD;AACxDI,QAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCR,QAAQ,CAACM,SAA3C;AACAT,QAAAA,QAAQ,CAACP,cAAc,CAAC,IAAD,CAAf,CAAR;AACD,OAHM,MAGA;AACL,cAAM,IAAImB,KAAJ,CAAU,eAAV,CAAN;AACD;AACF,KAfG,EAgBHC,KAhBG,CAgBIC,KAAD,IAAW;AAChBP,MAAAA,KAAK,CAACO,KAAK,CAACC,OAAP,CAAL;AACAf,MAAAA,QAAQ,CAACJ,aAAa,CAAC,KAAD,CAAd,CAAR;AACD,KAnBG,CAAN;AAoBD,GAtBD;AAuBD","sourcesContent":["import AuthService from \"../../../services/auth.service\";\n\nexport const isSignedInUser = (isLoggedIn) => {\n  return {\n    type: \"IS_LOGGED_IN\",\n    isLoggedIn,\n  };\n};\n\nexport const setIsFetching = (isFetching) => {\n  return {\n    type: \"IS_FETCHING\",\n    isFetching,\n  };\n};\n\nexport function signIn(user) {\n  return async (dispatch) => {\n    await dispatch(setIsFetching(true));\n    await AuthService.loginUser(user)\n      .then(async (response) => {\n        let a = await response.json();\n        return a;\n      })\n      .then((response) => {\n        if (response.status === 500) {\n          dispatch(setIsFetching(false));\n          alert(response.msg);\n        } else if (response.userToken && response.status === 200) {\n          localStorage.setItem(\"userToken\", response.userToken);\n          dispatch(isSignedInUser(true));\n        } else {\n          throw new Error(\"Unknown error\");\n        }\n      })\n      .catch((error) => {\n        alert(error.message);\n        dispatch(setIsFetching(false));\n      });\n  };\n}\n"]},"metadata":{},"sourceType":"module"}