{"ast":null,"code":"import _regeneratorRuntime from\"/home/serafym/\\u041E\\u0431\\u0449\\u0435\\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0435/development/ChatApp/chat-app/FrontendReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/serafym/\\u041E\\u0431\\u0449\\u0435\\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0435/development/ChatApp/chat-app/FrontendReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import AuthService from'../../../services/auth.service';// export const createUser = (user) => {\n//   return {\n//       type: types.AUTH_CREATE_USER,\n//       user,\n//   }\n// }\nexport var isSignedInUser=function isSignedInUser(isLoggedIn){return{type:\"IS_LOGGED_IN\",isLoggedIn:isLoggedIn};};export function signIn(user){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return AuthService.loginUser(user).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){var a;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return response.json();case 2:a=_context.sent;return _context.abrupt(\"return\",a);case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref2.apply(this,arguments);};}()).then(function(response){localStorage.setItem('userToken',response.userToken);dispatch(isSignedInUser(true));}).catch(function(error){return console.log(error);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref.apply(this,arguments);};}();}","map":{"version":3,"sources":["/home/serafym/Общедоступные/development/ChatApp/chat-app/FrontendReact/src/redux/actions/authActions/auth.actions.js"],"names":["AuthService","isSignedInUser","isLoggedIn","type","signIn","user","dispatch","loginUser","then","response","json","a","localStorage","setItem","userToken","catch","error","console","log"],"mappings":"yfAAA,MAAOA,CAAAA,WAAP,KAAwB,gCAAxB,CAIA;AACA;AACA;AACA;AACA;AACA;AAEA,MAAO,IAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,UAAD,CAAgB,CAC5C,MAAO,CACHC,IAAI,CAAE,cADH,CAEHD,UAAU,CAAVA,UAFG,CAAP,CAID,CALM,CAOP,MAAO,SAASE,CAAAA,MAAT,CAAgBC,IAAhB,CAAsB,CACzB,+FAAO,kBAAOC,QAAP,6IACKN,CAAAA,WAAW,CAACO,SAAZ,CAAsBF,IAAtB,EACLG,IADK,2FACA,iBAAOC,QAAP,8IACUA,CAAAA,QAAQ,CAACC,IAAT,EADV,QACAC,CADA,+CAEIA,CAFJ,wDADA,kEAKLH,IALK,CAKA,SAACC,QAAD,CAAY,CAChBG,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAkCJ,QAAQ,CAACK,SAA3C,EACAR,QAAQ,CAACL,cAAc,CAAC,IAAD,CAAf,CAAR,CACD,CARK,EASLc,KATK,CASC,SAAAC,KAAK,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAAJ,EATN,CADL,yDAAP,+DAYH","sourcesContent":["import AuthService from '../../../services/auth.service';\n\n\n\n// export const createUser = (user) => {\n//   return {\n//       type: types.AUTH_CREATE_USER,\n//       user,\n//   }\n// }\n\nexport const isSignedInUser = (isLoggedIn) => {\n  return {\n      type: \"IS_LOGGED_IN\",\n      isLoggedIn,\n  }\n}\n\nexport function signIn(user) {\n    return async (dispatch) => {\n          await AuthService.loginUser(user)\n          .then(async (response) => {\n            let a = await response.json();\n            return  a;\n          })\n          .then((response)=>{\n            localStorage.setItem('userToken', response.userToken);\n            dispatch(isSignedInUser(true))\n          })\n          .catch(error => console.log(error));\n      };\n}\n\n"]},"metadata":{},"sourceType":"module"}