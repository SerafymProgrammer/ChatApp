{"ast":null,"code":"import _defineProperty from\"/home/serafym/\\u041E\\u0431\\u0449\\u0435\\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0435/development/ChatApp/chat-app/FrontendReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/serafym/\\u041E\\u0431\\u0449\\u0435\\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0435/development/ChatApp/chat-app/FrontendReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/serafym/\\u041E\\u0431\\u0449\\u0435\\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0435/development/ChatApp/chat-app/FrontendReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/serafym/\\u041E\\u0431\\u0449\\u0435\\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0435/development/ChatApp/chat-app/FrontendReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/serafym/\\u041E\\u0431\\u0449\\u0435\\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0435/development/ChatApp/chat-app/FrontendReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{ValidatorForm,TextValidator}from'react-material-ui-form-validator';import jwt from\"jwt-decode\";import IconButton from'@material-ui/core/IconButton';import SendIcon from'@material-ui/icons/Send';var InputMessageForm=/*#__PURE__*/function(_Component){_inherits(InputMessageForm,_Component);var _super=_createSuper(InputMessageForm);function InputMessageForm(props){var _this;_classCallCheck(this,InputMessageForm);_this=_super.call(this,props);_this.handleChange=function(event){var value=event.target.value;var field=event.target.name;_this.setState(_defineProperty({},field,value));};_this.handleSubmit=function(){var token=localStorage.getItem('userToken');var decodedUser=jwt(token);var newMsg={id:null,textMessage:_this.state.message,authorMessage:decodedUser.nickName};_this.reset();_this.props.handleSubmit(newMsg);};_this.state={message:'',isMobileWindow:false};return _this;}_createClass(InputMessageForm,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;window.matchMedia(\"(max-width: 400px)\").addListener(function(e){_this2.setState({isMobileWindow:e.matches});});ValidatorForm.addValidationRule(\"maxSymbols\",function(value){if(value.length>200){return false;}return true;});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){ValidatorForm.removeValidationRule(\"maxSymbols\");}},{key:\"reset\",value:function reset(){this.setState(function(state){return{message:''};});}},{key:\"render\",value:function render(){var _this$state=this.state,message=_this$state.message,isMobileWindow=_this$state.isMobileWindow;return/*#__PURE__*/React.createElement(ValidatorForm,{ref:\"form\",onSubmit:this.handleSubmit,style:{display:'flex'}},/*#__PURE__*/React.createElement(TextValidator,{fullWidth:true,label:\"Message\",onChange:this.handleChange,name:\"message\",value:message,validators:['required','maxSymbols'],errorMessages:['this field is required','maximum 200 symbols'],margin:\"normal\",style:isMobileWindow?{width:'100%'}:{width:'50%'}}),/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"send\",type:\"submit\"},/*#__PURE__*/React.createElement(SendIcon,null)));}}]);return InputMessageForm;}(Component);export default InputMessageForm;","map":{"version":3,"sources":["/home/serafym/Общедоступные/development/ChatApp/chat-app/FrontendReact/src/components/chatPage/chat-components/inputMessage.jsx"],"names":["React","Component","ValidatorForm","TextValidator","jwt","IconButton","SendIcon","InputMessageForm","props","handleChange","event","value","target","field","name","setState","handleSubmit","token","localStorage","getItem","decodedUser","newMsg","id","textMessage","state","message","authorMessage","nickName","reset","isMobileWindow","window","matchMedia","addListener","e","matches","addValidationRule","length","removeValidationRule","display","width"],"mappings":"wuCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,aAAT,CAAwBC,aAAxB,KAA4C,kCAA5C,CACA,MAAOC,CAAAA,GAAP,KAAgB,YAAhB,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,MAAOC,CAAAA,QAAP,KAAqB,yBAArB,C,GAEMC,CAAAA,gB,oHAEJ,0BAAYC,KAAZ,CAAmB,kDACjB,uBAAMA,KAAN,EADiB,MA6BnBC,YA7BmB,CA6BJ,SAACC,KAAD,CAAW,CACxB,GAAMC,CAAAA,KAAK,CAAGD,KAAK,CAACE,MAAN,CAAaD,KAA3B,CACA,GAAME,CAAAA,KAAK,CAAGH,KAAK,CAACE,MAAN,CAAaE,IAA3B,CACA,MAAKC,QAAL,oBAAiBF,KAAjB,CAAyBF,KAAzB,GACD,CAjCkB,OAmCnBK,YAnCmB,CAmCJ,UAAM,CACnB,GAAIC,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAZ,CACA,GAAMC,CAAAA,WAAW,CAAGhB,GAAG,CAACa,KAAD,CAAvB,CACA,GAAII,CAAAA,MAAM,CAAG,CAACC,EAAE,CAAE,IAAL,CAAWC,WAAW,CAAE,MAAKC,KAAL,CAAWC,OAAnC,CAA4CC,aAAa,CAAEN,WAAW,CAACO,QAAvE,CAAb,CACA,MAAKC,KAAL,GACA,MAAKpB,KAAL,CAAWQ,YAAX,CAAwBK,MAAxB,EACD,CAzCkB,CAEjB,MAAKG,KAAL,CAAa,CACXC,OAAO,CAAE,EADE,CAEXI,cAAc,CAAE,KAFL,CAAb,CAFiB,aAMlB,C,0FAEmB,iBAClBC,MAAM,CAACC,UAAP,CAAkB,oBAAlB,EAAwCC,WAAxC,CAAoD,SAACC,CAAD,CAAK,CAAE,MAAI,CAAClB,QAAL,CAAc,CAACc,cAAc,CAAEI,CAAC,CAACC,OAAnB,CAAd,EAA6C,CAAxG,EACAhC,aAAa,CAACiC,iBAAd,CAAgC,YAAhC,CAA8C,SAACxB,KAAD,CAAW,CACvD,GAAIA,KAAK,CAACyB,MAAN,CAAe,GAAnB,CAAwB,CACtB,MAAO,MAAP,CACD,CACD,MAAO,KAAP,CACD,CALD,EAMD,C,mEAEsB,CACrBlC,aAAa,CAACmC,oBAAd,CAAmC,YAAnC,EACD,C,qCAGO,CACN,KAAKtB,QAAL,CAAc,SAACS,KAAD,QAAY,CACxBC,OAAO,CAAE,EADe,CAAZ,EAAd,EAGD,C,uCAgBQ,iBAC6B,KAAKD,KADlC,CACCC,OADD,aACCA,OADD,CACUI,cADV,aACUA,cADV,CAGP,mBACE,oBAAC,aAAD,EACE,GAAG,CAAC,MADN,CAEE,QAAQ,CAAE,KAAKb,YAFjB,CAGE,KAAK,CAAE,CACLsB,OAAO,CAAE,MADJ,CAHT,eAOE,oBAAC,aAAD,EACE,SAAS,KADX,CAEE,KAAK,CAAC,SAFR,CAGE,QAAQ,CAAE,KAAK7B,YAHjB,CAIE,IAAI,CAAC,SAJP,CAKE,KAAK,CAAEgB,OALT,CAME,UAAU,CAAE,CAAC,UAAD,CAAa,YAAb,CANd,CAOE,aAAa,CAAE,CAAC,wBAAD,CAA2B,qBAA3B,CAPjB,CAQE,MAAM,CAAC,QART,CASE,KAAK,CAAEI,cAAc,CAAG,CACtBU,KAAK,CAAE,MADe,CAAH,CAEjB,CACFA,KAAK,CAAE,KADL,CAXN,EAPF,cAsBA,oBAAC,UAAD,EAAY,aAAW,MAAvB,CAA8B,IAAI,CAAC,QAAnC,eACE,oBAAC,QAAD,MADF,CAtBA,CADF,CA6BD,C,8BA7E4BtC,S,EAgF/B,cAAeM,CAAAA,gBAAf","sourcesContent":["import React, { Component } from 'react'\nimport { ValidatorForm, TextValidator} from 'react-material-ui-form-validator'\nimport jwt from \"jwt-decode\";\nimport IconButton from '@material-ui/core/IconButton';\nimport SendIcon from '@material-ui/icons/Send';\n\nclass InputMessageForm extends Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      message: '',\n      isMobileWindow: false\n    }\n  }\n   \n  componentDidMount() {\n    window.matchMedia(\"(max-width: 400px)\").addListener((e)=>{ this.setState({isMobileWindow: e.matches}); });\n    ValidatorForm.addValidationRule(\"maxSymbols\", (value) => {\n      if (value.length > 200) {\n        return false;\n      }\n      return true;\n    });\n  }\n\n  componentWillUnmount() {\n    ValidatorForm.removeValidationRule(\"maxSymbols\");\n  }\n\n\n  reset() {\n    this.setState((state) => ({\n      message: '',\n    }))\n  }\n\n  handleChange = (event) => {\n    const value = event.target.value\n    const field = event.target.name\n    this.setState({ [field]: value })\n  }\n\n  handleSubmit = () => {\n    let token = localStorage.getItem('userToken');\n    const decodedUser = jwt(token);\n    let newMsg = {id: null, textMessage: this.state.message, authorMessage: decodedUser.nickName};\n    this.reset();\n    this.props.handleSubmit(newMsg);\n  }\n\n  render() {\n    const { message, isMobileWindow } = this.state;\n\n    return (\n      <ValidatorForm\n        ref=\"form\"\n        onSubmit={this.handleSubmit}\n        style={{\n          display: 'flex'\n        }}\n      >\n        <TextValidator\n          fullWidth\n          label=\"Message\"\n          onChange={this.handleChange}\n          name=\"message\"\n          value={message}\n          validators={['required', 'maxSymbols']}\n          errorMessages={['this field is required', 'maximum 200 symbols']}\n          margin=\"normal\"\n          style={isMobileWindow ? {\n            width: '100%',\n          } : {\n            width: '50%'\n          }}\n        />\n      <IconButton aria-label=\"send\" type=\"submit\">\n        <SendIcon />\n      </IconButton>\n\n      </ValidatorForm>\n    )\n  }\n}\n\nexport default InputMessageForm;"]},"metadata":{},"sourceType":"module"}