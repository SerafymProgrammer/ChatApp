{"ast":null,"code":"import _regeneratorRuntime from\"/home/serafym/\\u041E\\u0431\\u0449\\u0435\\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0435/ChatApp/chat-app/FrontendReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/serafym/\\u041E\\u0431\\u0449\\u0435\\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0435/ChatApp/chat-app/FrontendReact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import AuthService from\"../../../services/auth.service\";import*as actionTypes from'./actions.types';export var isSignedInUser=function isSignedInUser(isLoggedIn){return{type:actionTypes.IS_LOGGED_IN,isLoggedIn:isLoggedIn};};export var setIsFetching=function setIsFetching(isFetching){return{type:actionTypes.IS_FETCHING,isFetching:isFetching};};export function signIn(user){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return dispatch(setIsFetching(true));case 2:_context.next=4;return AuthService.loginUser(user).then(function(response){debugger;}).then(function(response){if(response.status===500){dispatch(setIsFetching(false));alert(response.msg);}else if(response.userToken&&response.status===200){localStorage.setItem(\"userToken\",response.userToken);dispatch(isSignedInUser(true));}else{throw new Error(\"Unknown error\");}}).catch(function(error){alert(error.message);dispatch(setIsFetching(false));});case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();}","map":{"version":3,"sources":["/home/serafym/Общедоступные/ChatApp/chat-app/FrontendReact/src/redux/actions/authActions/auth.actions.js"],"names":["AuthService","actionTypes","isSignedInUser","isLoggedIn","type","IS_LOGGED_IN","setIsFetching","isFetching","IS_FETCHING","signIn","user","dispatch","loginUser","then","response","status","alert","msg","userToken","localStorage","setItem","Error","catch","error","message"],"mappings":"ieAAA,MAAOA,CAAAA,WAAP,KAAwB,gCAAxB,CACA,MAAO,GAAKC,CAAAA,WAAZ,KAA6B,iBAA7B,CAEA,MAAO,IAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,UAAD,CAAgB,CAC5C,MAAO,CACLC,IAAI,CAAEH,WAAW,CAACI,YADb,CAELF,UAAU,CAAVA,UAFK,CAAP,CAID,CALM,CAOP,MAAO,IAAMG,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,UAAD,CAAgB,CAC3C,MAAO,CACLH,IAAI,CAAEH,WAAW,CAACO,WADb,CAELD,UAAU,CAAVA,UAFK,CAAP,CAID,CALM,CAOP,MAAO,SAASE,CAAAA,MAAT,CAAgBC,IAAhB,CAAsB,CAC3B,+FAAO,iBAAOC,QAAP,wIACCA,CAAAA,QAAQ,CAACL,aAAa,CAAC,IAAD,CAAd,CADT,8BAECN,CAAAA,WAAW,CAACY,SAAZ,CAAsBF,IAAtB,EACHG,IADG,CACG,SAACC,QAAD,CAAc,CACpB,SACA,CAHG,EAIHD,IAJG,CAIE,SAACC,QAAD,CAAc,CAClB,GAAIA,QAAQ,CAACC,MAAT,GAAoB,GAAxB,CAA6B,CAC3BJ,QAAQ,CAACL,aAAa,CAAC,KAAD,CAAd,CAAR,CACAU,KAAK,CAACF,QAAQ,CAACG,GAAV,CAAL,CACD,CAHD,IAGO,IAAIH,QAAQ,CAACI,SAAT,EAAsBJ,QAAQ,CAACC,MAAT,GAAoB,GAA9C,CAAmD,CACxDI,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAkCN,QAAQ,CAACI,SAA3C,EACAP,QAAQ,CAACT,cAAc,CAAC,IAAD,CAAf,CAAR,CACD,CAHM,IAGA,CACL,KAAM,IAAImB,CAAAA,KAAJ,CAAU,eAAV,CAAN,CACD,CACF,CAdG,EAeHC,KAfG,CAeG,SAACC,KAAD,CAAW,CAChBP,KAAK,CAACO,KAAK,CAACC,OAAP,CAAL,CACAb,QAAQ,CAACL,aAAa,CAAC,KAAD,CAAd,CAAR,CACD,CAlBG,CAFD,uDAAP,+DAsBD","sourcesContent":["import AuthService from \"../../../services/auth.service\";\nimport * as actionTypes from './actions.types'\n\nexport const isSignedInUser = (isLoggedIn) => {\n  return {\n    type: actionTypes.IS_LOGGED_IN,\n    isLoggedIn,\n  };\n};\n\nexport const setIsFetching = (isFetching) => {\n  return {\n    type: actionTypes.IS_FETCHING,\n    isFetching,\n  };\n};\n\nexport function signIn(user) {\n  return async (dispatch) => {\n    await dispatch(setIsFetching(true));\n    await AuthService.loginUser(user)\n      .then( (response) => {\n       debugger\n      })\n      .then((response) => {\n        if (response.status === 500) {\n          dispatch(setIsFetching(false));\n          alert(response.msg);\n        } else if (response.userToken && response.status === 200) {\n          localStorage.setItem(\"userToken\", response.userToken);\n          dispatch(isSignedInUser(true));\n        } else {\n          throw new Error(\"Unknown error\");\n        }\n      })\n      .catch((error) => {\n        alert(error.message);\n        dispatch(setIsFetching(false));\n      });\n  };\n}\n"]},"metadata":{},"sourceType":"module"}